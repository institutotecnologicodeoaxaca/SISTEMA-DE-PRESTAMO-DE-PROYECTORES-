<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Préstamo de Proyectores - ITO</title>
<style>
body { font-family: Arial, sans-serif; background:#eef1f5; padding:20px; }
.container { max-width:600px; margin:auto; background:white; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
h1 { text-align:center; margin-bottom:20px; }
label { font-weight:bold; }
input, select { width:100%; padding:10px; margin-bottom:15px; border:1px solid #999; border-radius:5px; }
.btn { width:100%; padding:12px; background:#007bff; color:white; border:none; border-radius:5px; cursor:pointer; font-size:16px; }
.alert { background:#c62828; color:white; padding:10px; border-radius:5px; margin-bottom:15px; display:none; text-align:center; }
</style>
</head>
<body>

<div class="container">
<h1>Sistema de Préstamo de Proyectores</h1>

<div id="alerta" class="alert">El proyector ya está ocupado en esa aula y hora.</div>

<label>Nombre del Alumno:</label>
<input type="text" id="alumno">

<label>Número de Control:</label>
<input type="text" id="control">

<label>Carrera:</label>
<select id="carrera">
<option>Ingeniería en Sistemas Computacionales</option>
<option>Ingeniería Civil</option>
<option>Ingeniería Química</option>
<option>Ingeniería Industrial</option>
<option>Ingeniería en Gestión Empresarial</option>
<option>Ingeniería Mecánica</option>
<option>Ingeniería Eléctrica</option>
<option>Ingeniería Electrónica</option>
<option>Licenciatura en Administración</option>
<option>Licenciatura en Contador Público</option>
</select>

<label>Profesor:</label>
<input type="text" id="profesor">

<label>Aula:</label>
<input type="text" id="aula">

<label>Hora de clase:</label>
<select id="hora"></select>

<button class="btn" onclick="registrar()">Registrar Préstamo</button>
</div>

<script>
// Generar horas
let horas = ["7am - 8am","8am - 9am","9am - 10am","10am - 11am","11am - 12pm","12pm - 1pm","1pm - 2pm","2pm - 3pm","3pm - 4pm","4pm - 5pm","5pm - 6pm","6pm - 7pm","7pm - 8pm"];
const horaSel = document.getElementById('hora');
horas.forEach(h => horaSel.innerHTML += `<option>${h}</option>`);

// Registrar préstamo
function registrar(){
    let alumno = document.getElementById('alumno').value;
    let control = document.getElementById('control').value;
    let carrera = document.getElementById('carrera').value;
    let profesor = document.getElementById('profesor').value;
    let aula = document.getElementById('aula').value;
    let hora = document.getElementById('hora').value;

    if(!alumno || !control || !profesor || !aula){
        alert("Por favor llena todos los campos.");
        return;
    }

    let prestamos = JSON.parse(localStorage.getItem('prestamos') || '[]');

    // Validar si ya está ocupado
    let ocupado = prestamos.some(p => p.aula === aula && p.hora === hora && !p.devuelto);

    if(ocupado){
        document.getElementById('alerta').style.display = "block";
        return;
    }

    document.getElementById('alerta').style.display = "none";

    let fechaHoy = new Date().toLocaleDateString();
    let horaReg = new Date().toLocaleTimeString();

    let nuevo = {
        alumno,
        control,
        carrera,
        profesor,
        aula,
        hora,
        fecha: fechaHoy,
        horaRegistro: horaReg,
        devuelto: false
    };

    prestamos.push(nuevo);
    localStorage.setItem('prestamos', JSON.stringify(prestamos));

    alert("Préstamo registrado correctamente.");
    document.querySelectorAll("input").forEach(i => i.value = "");
}
</script>

</body>
</html>
